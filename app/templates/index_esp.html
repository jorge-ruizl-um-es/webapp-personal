{%extends 'main_base_esp.html'%}

{%block title%} Home {%endblock%}

{%block content%}

<div class="text-center">
  <img src="{{ url_for('static', filename='images/perfil_malo2.jpeg') }}" 
  	class="img-fluid rounded-circle" alt="Foto de Perfil" style="width: 275px; height: 275px; object-fit: cover;">
</div>

<div class="container text-center mt-4">
	<h1 style="font-family: 'Poppins', sans-serif; font-size: 3.5rem; font-weight: 300;">
		Jorge Ruiz López
	</h1>
	<br>
	<a href="{{ url_for('static', filename='files/CV.pdf') }}" 
   		class="btn btn-dark btn-lg mx-auto text-center bg-dark text-white"
   		download>
  		Descargar CV
	</a>
</div>

<!-- Sección Sobre mí -->
<div class="container mt-5">
  <div class="card shadow-lg border-0 rounded-3">
	<div class="card-body mx-4">
	  <h2 class="card-title text-center mb-4">Sobre mí</h2>
	  <h4>¡Bienvenido a mi espacio personal!</h3>
	  <p class="fs-5 mb-4" style="text-align: justify;">Soy Jorge Ruiz López, estudiante de tercer año de Ciencia e Ingeniería de Datos en la Universidad de Murcia. 
		  Aquí encontrarás una parte de mi formación académica, personal y profesional. Iré actualizando la información
		  con los nuevos proyectos que vaya desarrollando y los logros que vaya obteniendo a lo largo de mi carrera.
	  </p>

	  <!-- Dos columnas -->
		<div class="row row-cols-1 row-cols-lg-2 g-5">
		<!-- Columna izquierda: párrafos -->
			<div class="col">
				{%for par in user_data['description']%}
					<p class="fs-5 mb-4 text-justify" style="text-align: justify;"">
						{{par}}
					</p>
				{%endfor%}
			</div>

		<!-- Columna derecha con lista de skills -->
			<div class="col px-4, py-4">
				<div class="about-skills">
					<br>

					<h5 class="text-uppercase text-muted mb-3">Habilidades destacadas</h6>

					<ul class="fs-5 mb-3">
						<li class="mb-3">Inteligencia Artificial y Machine Learning</li>
						<li class="mb-3">Análisis de datos y visualización</li>
						<li class="mb-3">Automatización con Python (ETL, scrapping, APIs)</li>
						<li class="mb-3">Desarrollo cliente/servidor · Redes</li>
					</ul>

					<br>

					<div class="d-flex flex-wrap gap-2">
						<span class="badge rounded-pill text-bg-dark" style="font-size: 1rem; padding: 0.6em 1em;">Python</span>
						<span class="badge rounded-pill text-bg-secondary" style="font-size: 1rem; padding: 0.6em 1em;">Pandas</span>
						<span class="badge rounded-pill text-bg-dark" style="font-size: 1rem; padding: 0.6em 1em;">SQL</span>
						<span class="badge rounded-pill text-bg-dark" style="font-size: 1rem; padding: 0.6em 1em;">Git</span>
						<span class="badge rounded-pill text-bg-secondary" style="font-size: 1rem; padding: 0.6em 1em;">APIs</span>
						<span class="badge rounded-pill text-bg-dark" style="font-size: 1rem; padding: 0.6em 1em;">ML</span>
					</div>
				</div>
			</div>
		</div>

		<p class="fs-5 mb-4" style="text-align: justify;">
			Mi objetivo es permanecer en constante crecimiento como profesional y como persona, a la par que gano 
			experiencia en distintos ámbitos y contribuyo con mis habilidades en programación, análisis e investigación. 
			Este sitio refleja quién soy, qué he aprendido y conseguido hasta ahora, y hacia dónde quiero dirigirme.
	  	</p>	
	</div>
  </div>
</div>

<br>

<!-- Sección de formación -->
<div class="my-5" id="formacion">
	<h2 class="mb-5 fs-1">Formación</h2>

	<!-- Idiomas -->
	<div class="mb-5 px-5" id="idiomas">
		<h2 class="h3">Idiomas</h2>
		<p class="fs-5 mb-4">Estos son los idiomas que manejo y con los que puedo sentirme cómodo hablando, escribiendo y escuchando; junto con mi grado de maestría en cada uno.</p>

		<ol class="list-group list-group-numbered">
			{% for idioma in user_data['languages'] %}
				<li class="list-group-item py-3" style="font-size: large;">
					<div class="d-flex justify-content-between align-items-center">
						<div>
							<div class="fw-semibold">
								{{idioma['lang']}}
							</div>

							<small class="text-muted">
								{{idioma['level']}}
							</small>
						</div>
						
						{% if idioma['certificate'] %}
							<a href="{{url_for('static', filename='files/' ~ idioma['certificate'])}}"
								class="badge rounded-pill text-bg-dark text-decoration-none" download>
								Certificado
							</a>
						{%endif%}
					</div>
				</li>
			{%endfor%}
		</ol>
	</div>


	<!-- Estudios -->
	<div class="container my-5 px-5" id="educacion">
		<h2 class="mb-1">Educación</h2>
		<p class="fs-5 mb-4" style="font-size: large;">Mi formación reglada, con los puntos más relevantes.</p>
		
		<!-- CSS embebido para desplazamiento -->
		<style>
			.carousel-wrap{ position:relative; isolation:isolate; } /* capa propia */
			.carousel-track{ scroll-snap-type:x mandatory; position:relative; z-index:0; }
			.carousel-track > .study-card{
				scroll-snap-align:start;
				min-width: 380px; max-width: 440px; /* puedes ajustar tamaño */
				border-radius:.75rem;
			}
			.study-card{ transition:transform .2s, box-shadow .2s; }
			.study-card:hover{ transform:translateY(-4px); box-shadow:0 .75rem 1.25rem rgba(0,0,0,.15); }

			/* Flechas en overlay por encima del carrusel */
			.carousel-arrows{
				position:absolute; inset:0;
				display:flex; align-items:center; justify-content:space-between;
				padding:0 .25rem;
				pointer-events:none;  /* la capa ignora clicks */
				z-index:10;
			}
			.carousel-arrows .btn{ pointer-events:auto; } /* los botones sí */

			/* === Certificados: solo visibles en hover (desktop) === */
			.card-actions{ 
				opacity:0; 
				visibility:hidden; 
				transition:opacity .2s ease, visibility .2s ease;
			}
			@media (hover:hover){
				.study-card:hover .card-actions,
				.study-card:focus-within .card-actions{
					opacity:1; visibility:visible;
			}
			}
			/* En dispositivos sin hover (móvil/tablet táctil), siempre visibles */
			@media (hover:none){
				.card-actions{ opacity:1; visibility:visible; }
			}
		</style>

		<div class="carousel-wrap" data-carousel>

			<!-- Pista desplazable -->
			<div class="carousel-track d-flex gap-5 overflow-auto py-2 px-1">
			{% for s in user_data['studies'] %}
				<div class="card study-card shadow-sm border-0">
					<div class="card-body">
						<h5 class="mb-1">{{ s.place }}</h5>
						<div class="fw-semibold">{{ s.type }}</div>
						<div class="text-muted mb-2">{{ s.date }}</div>

						<ul class="ps-3 mb-3">
						{% for d in s.description %}
							<li>{{ d }}</li>
						{% endfor %}
						</ul>

						{% if s.certificados %}
						<div class="card-actions">
							{% for cert in s.certificados %}
							<a href="{{ url_for('static', filename='files/' ~ cert) }}"
								class="btn btn-dark btn-sm me-2 mb-2" download>
								Certificado
							</a>
							{% endfor %}
						</div>
						{% endif %}
					</div>
				</div>
			{% endfor %}
			</div>
			
			<!-- Mostrar flechas si hay más de 3 elementos -->
			{% if user_data['studies']|length > 3 %}
      			<div class="carousel-arrows d-none d-md-flex">
        			<button class="btn btn-outline-dark rounded-circle shadow" data-dir="left"  aria-label="Anterior">‹</button>
        			<button class="btn btn-outline-dark rounded-circle shadow" data-dir="right" aria-label="Siguiente">›</button>
      			</div>
    		{% endif %}

		</div>
	</div>

	
	<!-- Habilidades destacables -->
	<div class="container my-5 px-5" id="habilidades">
		<h2 class="mb-1">Habilidades destacables</h2>
		<p class="fs-5 mb-4" style="font-size: large;">
			Habilidades o aptitudes que he ido adquieriendo gracias a mi formación tanto académica 
			como autodidacta o mediante cursos.
		</p>

		<!-- Lista de cards con las habilidades -->
		<div class="carousel-wrap" data-carousel="">

			<!-- Pista desplazable -->
			<div class="carousel-track d-flex gap-5 overflow-auto py-2 px-1">
			{% for s in user_data['education'] %}
				<div class="card study-card shadow-sm border-0">
					<div class="card-body">
						<h5 class="mb-1">{{ s.skill }}</h5>
						<div class="mb-2">{{ s.description }}</div>

					<ul class="ps-3 mb-3">
					{% for d in s.skill_detail %}
						<li>{{ d }}</li>
					{% endfor %}
					</ul>
				</div>
			</div>
		{% endfor %}
		</div>

		<!-- Mostrar flechas si hay más de 3 elementos -->
		{% if user_data['education']|length > 3 %}
			<div class="carousel-arrows d-none d-md-flex">
				<button class="btn btn-outline-dark rounded-circle shadow" data-dir="left"  aria-label="Anterior">‹</button>
				<button class="btn btn-outline-dark rounded-circle shadow" data-dir="right" aria-label="Siguiente">›</button>
			</div>
		{% endif %}
	</div>

	<!-- JS genérico para desplazamiento con flechas -->
	<script>
		document.querySelectorAll('[data-carousel]').forEach(section => {
			const track = section.querySelector('.carousel-track');
			section.querySelectorAll('[data-dir]').forEach(btn => {
			btn.addEventListener('click', () => {
				const step = track.clientWidth * 0.9;               // tamaño del scroll
				const dir  = btn.dataset.dir === 'left' ? -1 : 1;
				track.scrollBy({ left: dir * step, behavior: 'smooth' });
			});
			});
		});
	</script>

</div>

<!-- ====== Franja de logos (Tech Strip) ====== -->
<div class="tech-strip my-5" aria-label="Tecnologías y herramientas">
  <div class="tech-strip__inner">
    <!-- Una sola pista -->
    <div class="tech-track">
      {% for logo in user_data['logos'] %}
      <div class="tech-item" title="{{ logo.title }}">
        <img src="{{ logo.file }}"
             alt="{{ logo.title }}" loading="lazy" height="44">
      </div>
      {% endfor %}
    </div>

    <!-- Pista 2 (duplicada para bucle perfecto) -->
    <div class="tech-track" aria-hidden="true">
      {% for logo in user_data['logos'] %}
      <div class="tech-item">
        <img src="{{ url_for('static', filename='images/logos/' ~ logo.file) }}"
             alt="" loading="lazy" height="44">
      </div>
      {% endfor %}
    </div>
  </div>
</div>

<!-- CSS para que la franja sea dinámica -->
<style>
  .tech-strip{
    --bg: #e9eef7;               /* color de fondo */
	--bg2: #eef3ff;
    --gap: 5rem;                 /* separación entre logos */
	--logo-h: 56px;
	--speed: 70s;
   	
	/* Full-bleed incluso dentro de .container */
    width: 100vw;
    position: relative;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;

    background: linear-gradient(90deg, var(--bg), var(--bg2) 40%, var(--bg));
    padding: 2rem 0;         /* franja más ancha/alta */
    overflow: hidden;
  }
  .tech-strip__inner{
    display: flex;
  }
  .tech-track{
    display: inline-flex;
    align-items: center;
    gap: var(--gap);
    animation: tech-scroll var(--speed) linear infinite;
    will-change: transform;
  }
  /* Pausa al pasar el ratón */
  .tech-strip:hover .tech-track{ animation-play-state: paused; }

  .tech-item{
    flex: 0 0 auto;
    display: grid;
    place-items: center;
    height: calc(var(--logo-h) + 16px);  /* caja algo mayor que el logo */
    padding: 0 .25rem;
    opacity: .95;
    transition: transform .2s ease, opacity .2s ease;
  }
  .tech-item:hover{ transform: translateY(-2px) scale(1.03); opacity: 1; }

  .tech-item img{
    height: var(--logo-h);                /* tamaño de logo (ajústalo si quieres) */
    width: auto;
    display: block;
    filter: drop-shadow(0 1px 1px rgba(0,0,0,.35));
  }

  /* Bucle infinito: desplaza 100% del ancho de una pista */
  @keyframes tech-scroll{
    from { transform: translateX(0); }
    to   { transform: translateX(-100%); }
  }

  /* Accesibilidad: respeta “reducir movimiento” */
  @media (prefers-reduced-motion: reduce){
    .tech-track{ animation: none; }
  }

  /* Responsive: un poco menos de separación en pantallas estrechas */
  @media (max-width: 576px){
    .tech-strip{ --gap: 1.5rem; }
    .tech-item img{ height: 36px; }
    .tech-item{ height: 46px; }
  }
</style>


<!-- ========================================= -->

<div class="my-5" id="experiencia">
	<h2 class="mb-5 fs-1">Experiencia laboral</h2>
	<p class="fs-5 mb-4" style="font-size: large;">
		Situaciones donde he puesto en práctica mis conocimientos o donde he desempeñado una función
		como parte de un proyecto o empresa. Se incluye la documentación que lo verifica formalmente.
	</p>

	{% for exp in user_data['experience'] %}
	<div class="card study-card shadow-sm border-0 mb-4">
		<div class="card-body">
			<h5 class="card-title mb-1" style="font-size: x-large;">{{exp.place}}</h5>
			<div class="fw-semibold" style="font-size: large;">{{exp.type}}</div>
			<div class="text-muted fst-italic mb-2" style="font-size: medium;">{{exp.date}}</div>

			<ul class="mb-3">
				{% for point in exp.description %}
					<li style="font-size: 1.1rem;">{{point}}</li>
				{% endfor %}
			</ul>

			{% if exp.certificados %}
			<div class="card-actions">
				{% for cert in exp.certificados %}
					<a href="{{ url_for('static', filename='files/' ~ cert.file) }}"
						class="btn btn-dark btn-sm me-2 mb-2" style="font-size: 1.1rem;"
						download="">
						{{cert.nombre}}
					</a>
				{% endfor %}
			</div>
			{% endif %}
		</div>
	</div>
	{% endfor %}

</div>



<!-- Faltan los proyectos y el contacto -->

{%endblock%}